{% extends "base.html" %}

{% block title %}1í˜¸ì„  ì‹¤ì‹œê°„ ì—´ì°¨ ìœ„ì¹˜{% endblock %}

{% block content %}
<style>
/* ===== íƒ­ ===== */
.tab-buttons {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
}

.tab-btn {
    padding: 8px 16px;
    border-radius: 999px;
    border: 1px solid #e5e7eb;
    background: #fff;
    cursor: pointer;
    font-weight: 600;
}

.tab-btn.active {
    background: #1e293b;
    color: #fff;
}

/* ===== í•„í„° ===== */
.filter-buttons {
    margin-bottom: 12px;
}

.filter-btn {
    padding: 6px 14px;
    border-radius: 999px;
    border: 1px solid #e5e7eb;
    background: #f8fafc;
    cursor: pointer;
    margin-right: 6px;
    font-size: 13px;
}

.filter-btn.active {
    background: #2563eb;
    color: #fff;
    border-color: #2563eb;
}

/* ===== í…Œì´ë¸” ===== */
.table-card {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    overflow: hidden;
}

table {
    width: 100%;
    border-collapse: collapse;
}

thead {
    background: #f4f6f8;
}

th, td {
    padding: 12px;
    font-size: 14px;
    text-align: center;
    border-bottom: 1px solid #f0f0f0;
}

tbody tr:hover {
    background-color: #f9fafb;
}

/* ===== ë°°ì§€ ===== */
.badge {
    display: inline-block;
    padding: 4px 10px;
    font-size: 12px;
    border-radius: 999px;
    font-weight: 600;
}

.badge-enter  { background: #fef3c7; color: #92400e; }
.badge-arrive { background: #e0f2fe; color: #0369a1; }
.badge-depart { background: #dcfce7; color: #166534; }

.badge-express { background: #fee2e2; color: #991b1b; }
.badge-normal  { background: #e5e7eb; color: #374151; }
.badge-last    { background: #111827; color: #fff; }

/* ===== ìˆ¨ê¹€ ===== */
.hidden {
    display: none;
}
</style>

<h2>ğŸš† 1í˜¸ì„  ì‹¤ì‹œê°„ ì—´ì°¨ ìœ„ì¹˜</h2>

<!-- ğŸ”¹ ìƒë‹¨ íƒ­ -->
<div class="tab-buttons">
    <button class="tab-btn active" data-tab="table">í‘œ ë³´ê¸°</button>
    <button class="tab-btn" data-tab="map">ê·¸ë¦¼ ë³´ê¸°</button>
</div>

<!-- ================= í‘œ íƒ­ ================= -->
<div id="tab-table">

    <!-- ìƒ/í•˜í–‰ í•„í„° -->
    <div class="filter-buttons">
        <button class="filter-btn active" data-filter="all">ì „ì²´</button>
        <button class="filter-btn" data-filter="0">ìƒí–‰</button>
        <button class="filter-btn" data-filter="1">í•˜í–‰</button>
    </div>

    <div class="table-card">
        <table>
            <thead>
                <tr>
                    <th>ì—´ì°¨ë²ˆí˜¸</th>
                    <th>í˜„ì¬ì—­</th>
                    <th>ì¢…ì°©ì—­</th>
                    <th>ë°©í–¥</th>
                    <th>ìƒíƒœ</th>
                    <th>ì¢…ë¥˜</th>
                    <th>ë§‰ì°¨</th>
                </tr>
            </thead>
            <tbody>
            {% for t in trains %}
                <tr data-updn="{{ t.updnLine }}">
                    <td><strong>{{ t.trainNo }}</strong></td>
                    <td>{{ t.statnNm }}</td>
                    <td>{{ t.statnTnm }}</td>
                    <td>{% if t.updnLine == "0" %}ìƒí–‰{% else %}í•˜í–‰{% endif %}</td>

                    <td>
                        {% if t.trainSttus == "0" %}
                            <span class="badge badge-enter">ì§„ì…</span>
                        {% elif t.trainSttus == "1" %}
                            <span class="badge badge-arrive">ë„ì°©</span>
                        {% elif t.trainSttus == "2" %}
                            <span class="badge badge-depart">ì¶œë°œ</span>
                        {% else %}
                            -
                        {% endif %}
                    </td>

                    <td>
                        {% if t.directAt == "1" or t.directAt == "7" %}
                            <span class="badge badge-express">ê¸‰í–‰</span>
                        {% else %}
                            <span class="badge badge-normal">ì™„í–‰</span>
                        {% endif %}
                    </td>

                    <td>
                        {% if t.lstcarAt == "1" %}
                            <span class="badge badge-last">ë§‰ì°¨</span>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- ================= ê·¸ë¦¼ íƒ­ (ë¹ˆ ìƒíƒœ) ================= -->
<div id="tab-map" class="hidden">
    <div style="height:300px; border:2px dashed #cbd5e1; border-radius:12px;
                display:flex; align-items:center; justify-content:center; color:#64748b;">
        ğŸš§ ë…¸ì„ ë„ ì¤€ë¹„ ì¤‘
    </div>
</div>

<script>
/* ===== íƒ­ ì „í™˜ ===== */
document.querySelectorAll(".tab-btn").forEach(btn => {
    btn.addEventListener("click", () => {
        document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        document.getElementById("tab-table").classList.toggle("hidden", btn.dataset.tab !== "table");
        document.getElementById("tab-map").classList.toggle("hidden", btn.dataset.tab !== "map");
    });
});

/* ===== ìƒ/í•˜í–‰ í•„í„° ===== */
document.querySelectorAll(".filter-btn").forEach(btn => {
    btn.addEventListener("click", () => {
        document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        const filter = btn.dataset.filter;
        document.querySelectorAll("tbody tr").forEach(row => {
            if (filter === "all" || row.dataset.updn === filter) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        });
    });
});
</script>

{% endblock %}
